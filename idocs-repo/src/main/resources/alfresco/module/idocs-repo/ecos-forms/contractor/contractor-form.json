{
  "id": "02347243-639c-4da4-b261-8b47cbca2362",
  "formKey": "alf_idocs:contractor",
  "title": {
    "en": "Idocs contractor form"
  },
  "description": {
    "en": ""
  },
  "customModule": null,
  "typeRef": "emodel/type@idocs-contractor",
  "width": "default",
  "i18n": {
    "ru": {
      "Классификация": "Классификация",
      "Название": "Название",
      "Адреса": "Адреса",
      "Реквизиты": "Реквизиты",
      "Контактные данные": "Контактные данные",
      "Ответственные со стороны компании": "Ответственные со стороны компании",
      "Конфигурация": "Конфигурация",
      "Основные реквизиты": "Основные реквизиты",
      "Банковские реквизиты": "Банковские реквизиты",
      "Автозаполнение": "Автозаполнение",
      "Отмена": "Отмена",
      "Сохранить": "Сохранить",
      "Нажмите, чтобы автоматически заполнить поля реквизитов": "Нажмите, чтобы автоматически заполнить поля реквизитов",
      "Некорректный ИНН/ЕГРПОУ": "Некорректный ИНН/ЕГРПОУ",
      "Серия должна содержать только цифры": "Серия должна содержать только цифры",
      "Номер должен содержать только цифры": "Номер должен содержать только цифры",
      "Некорректный формат": "Некорректный формат",
      "Некорректный ОГРНИП": "Некорректный ОГРНИП",
      "Документы": "Документы",
      "Поставщик": "Поставщик",
      "Клиент": "Покупатель",
      "Сотрудник": "Сотрудник",
      "Create": "Создать",
      "Cancel": "Отмена",
      "Save": "Сохранить",
      "Error": "Ошибка",
      "Inn field is requered": "Поле Инн не может быть пустым",
      "Error while requesting data": "Ошибка при запросе данных",
      "Data is empty": "Контрагент не найден",
      "Перезаписать заполненные поля формы?": "Перезаписать заполненные поля формы?",
      "Undefined error": "Undefined error",
      "Update": "Обновить данные"
    },
    "en": {
      "Классификация": "Classification",
      "Название": "Title",
      "Адреса": "Addresses",
      "Реквизиты": "Requisites",
      "Контактные данные": "Contact details",
      "Ответственные со стороны компании": "Responsible by the company",
      "Конфигурация": "Configuration",
      "Основные реквизиты": "Basic Details",
      "Банковские реквизиты": "Bank details",
      "Автозаполнение": "Autocomplete",
      "Отмена": "Cancel",
      "Сохранить": "Save",
      "Нажмите, чтобы автоматически заполнить поля реквизитов": "Click to automatically fill in requisites",
      "Некорректный ИНН/ЕГРПОУ": "Incorrect INN/EGRPOU",
      "Серия должна содержать только цифры": " The series must contain only numbers",
      "Номер должен содержать только цифры": "The number must contain only numbers",
      "Некорректный формат": "Invalid format",
      "Некорректный ОГРНИП": "Invalid PSRNSP",
      "Документы": "Documents",
      "Поставщик": "Vendor",
      "Клиент": "Buyer",
      "Сотрудник": "Employee",
      "Create": "Create",
      "Cancel": "Cancel",
      "Save": "Save",
      "Error": "Error",
      "Inn field is requered": "Inn field is requered",
      "Error while requesting data": "Error while requesting data",
      "Data is empty": "Counterparty not found",
      "Перезаписать заполненные поля формы?": "Overwrite completed form fields?",
      "Undefined error": "Неизвестная ошибка",
      "Update": "Update data"
    }
  },
  "definition": {
    "components": [
      {
        "components": [
          {
            "label": "Основные реквизиты",
            "key": "general-data",
            "components": [
              {
                "scrollableContent": true,
                "key": "panel5",
                "type": "panel",
                "input": false,
                "components": [
                  {
                    "title": "Классификация",
                    "type": "panel",
                    "input": false,
                    "key": "panel",
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:contractorType",
                                "data": {
                                  "url": "/citeck/ecos/records/query"
                                },
                                "defaultValue": "",
                                "key": "idocs_contractorType",
                                "properties": {
                                  "attribute": "idocs:contractorType"
                                },
                                "type": "ecosSelect",
                                "input": true
                              }
                            ],
                            "type": "column",
                            "input": false,
                            "key": "column1",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [
                              {
                                "label": "idocs:contractorKind",
                                "data": {
                                  "url": "/citeck/ecos/records/query"
                                },
                                "defaultValue": "",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_contractorKind",
                                "properties": {
                                  "attribute": "idocs:contractorKind",
                                  "dummy": "dummy"
                                },
                                "type": "ecosSelect",
                                "input": true,
                                "refreshOn": ""
                              }
                            ],
                            "type": "column",
                            "input": false,
                            "key": "column2",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "type": "columns",
                        "input": false,
                        "key": "columns",
                        "reorder": false
                      },
                      {
                        "title": "Название",
                        "key": "panel",
                        "type": "panel",
                        "input": false,
                        "components": [
                          {
                            "columns": [
                              {
                                "components": [
                                  {
                                    "label": "idocs:fullOrganizationName",
                                    "defaultValue": "",
                                    "refreshOn": "idocs_contractorKind",
                                    "clearOnRefresh": true,
                                    "customDefaultValue": "\r\n",
                                    "calculateValue": "if (data.idocs_contractorKind === 'individual') {\r\nif (data.idocs_lastName) {\r\n  value = data.idocs_lastName;\r\n}\r\nif (data.idocs_firstName) {\r\n  value = value + \" \" + data.idocs_firstName;\r\n}\r\nif (data.idocs_patronymicName) {\r\n  value = value + \" \" + data.idocs_patronymicName;\r\n}\r\n}",
                                    "allowCalculateOverride": true,
                                    "validate": {
                                      "required": true
                                    },
                                    "key": "idocs_fullOrganizationName",
                                    "properties": {
                                      "attribute": "idocs:fullOrganizationName",
                                      "dummy": "dummy"
                                    },
                                    "logic": [
                                      {
                                        "name": "individual-on",
                                        "trigger": {
                                          "type": "javascript",
                                          "javascript": "result  = data.idocs_contractorKind === 'individual';"
                                        },
                                        "actions": [
                                          {
                                            "name": "disable-on",
                                            "type": "property",
                                            "property": {
                                              "label": "Disabled",
                                              "value": "disabled",
                                              "type": "boolean"
                                            },
                                            "state": "true"
                                          }
                                        ]
                                      }
                                    ],
                                    "type": "textfield",
                                    "input": true
                                  }
                                ],
                                "width": 4,
                                "type": "column",
                                "input": false,
                                "key": "column1",
                                "index": 0,
                                "clearOnHide": true,
                                "conditional": {
                                  "show": null,
                                  "when": null
                                }
                              },
                              {
                                "components": [
                                  {
                                    "label": "idocs:shortOrganizationName",
                                    "defaultValue": "",
                                    "key": "idocs_shortOrganizationName",
                                    "properties": {
                                      "attribute": "idocs:shortOrganizationName",
                                      "dummy": "dummy"
                                    },
                                    "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = !isIndividual;",
                                    "type": "textfield",
                                    "input": true
                                  }
                                ],
                                "width": 4,
                                "type": "column",
                                "input": false,
                                "key": "column2",
                                "index": 1,
                                "clearOnHide": true,
                                "conditional": {
                                  "show": null,
                                  "when": null
                                }
                              },
                              {
                                "width": 4,
                                "type": "column",
                                "input": false,
                                "key": "column3",
                                "components": [
                                  {
                                    "label": "idocs:legalForm",
                                    "journalId": "legal-form",
                                    "customPredicateJs": "value = {t: \"and\", \r\nval: [\r\n  {t: \"not-eq\", att:\"cm:title\", val: \"ИП\"}, \r\n  {t: \"not-eq\", att:\"cm:title\", val: \"Физ. Лицо\"}\r\n  ]\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
                                    "key": "idocs_legalForm",
                                    "properties": {
                                      "attribute": "idocs:legalForm",
                                      "dummy": "dummy"
                                    },
                                    "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'legal-entity' ;\n\nshow = isIndividual;",
                                    "type": "selectJournal",
                                    "input": true,
                                    "tab": 0,
                                    "defaultValue": null
                                  }
                                ],
                                "index": 2,
                                "clearOnHide": true,
                                "conditional": {
                                  "show": null,
                                  "when": null
                                }
                              }
                            ],
                            "key": "columns7",
                            "type": "columns",
                            "input": false
                          }
                        ],
                        "tab": 0
                      }
                    ],
                    "tab": 0,
                    "collapsed": false,
                    "reorder": false
                  },
                  {
                    "title": "Информация физического лица",
                    "type": "panel",
                    "input": false,
                    "key": "panel4",
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:lastName",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_lastName",
                                "properties": {
                                  "attribute": "idocs:lastName",
                                  "dummy": "dummy"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 3,
                            "type": "column",
                            "input": false,
                            "key": "column1",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [
                              {
                                "label": "idocs:firstName",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_firstName",
                                "properties": {
                                  "attribute": "idocs:firstName",
                                  "dummy": "dummy"
                                },
                                "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 3,
                            "type": "column",
                            "input": false,
                            "key": "column2",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 3,
                            "type": "column",
                            "input": false,
                            "key": "column3",
                            "components": [
                              {
                                "label": "idocs:patronymicName",
                                "key": "idocs_patronymicName",
                                "properties": {
                                  "attribute": "idocs:patronymicName",
                                  "dummy": "dummy"
                                },
                                "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "index": 2,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 3,
                            "type": "column",
                            "input": false,
                            "key": "column4",
                            "components": [
                              {
                                "label": "ecos:birthDate",
                                "format": "yyyy-MM-dd",
                                "datePicker": {
                                  "minDate": "",
                                  "maxDate": "moment()"
                                },
                                "enableTime": false,
                                "validate": {
                                  "required": true
                                },
                                "key": "ecos_birthDate",
                                "properties": {
                                  "attribute": "ecos:birthDate",
                                  "dummy": "dummy"
                                },
                                "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "datetime",
                                "input": true,
                                "suffix": true
                              }
                            ],
                            "index": 3,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "type": "columns",
                        "input": false,
                        "key": "columns6",
                        "reorder": false
                      }
                    ],
                    "tab": 0,
                    "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                    "collapsed": false,
                    "reorder": false
                  },
                  {
                    "title": "Документ, удостоверяющий личность",
                    "type": "panel",
                    "input": false,
                    "key": "panel3",
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:numberPass",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_numberPass",
                                "properties": {
                                  "attribute": "idocs:numberPass",
                                  "dummy": "dummy"
                                },
                                "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column5",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [
                              {
                                "label": "idocs:whoIssuedPass",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_whoIssuedPass",
                                "properties": {
                                  "attribute": "idocs:whoIssuedPass",
                                  "dummy": "dummy"
                                },
                                "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column6",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column7",
                            "components": [
                              {
                                "label": "idocs:passIssueDate",
                                "format": "yyyy-MM-dd",
                                "datePicker": {
                                  "minDate": "",
                                  "maxDate": "moment()"
                                },
                                "enableTime": false,
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_passIssueDate",
                                "properties": {
                                  "attribute": "idocs:passIssueDate",
                                  "dummy": "dummy"
                                },
                                "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "datetime",
                                "input": true,
                                "suffix": true
                              }
                            ],
                            "index": 2,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "key": "columns5",
                        "type": "columns",
                        "input": false
                      }
                    ],
                    "tab": 0,
                    "customConditional": "\nvar kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                    "collapsed": false,
                    "reorder": false
                  },
                  {
                    "title": "Адреса",
                    "key": "panel9",
                    "type": "panel",
                    "input": false,
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:juridicalAddress",
                                "defaultValue": "",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_juridicalAddress",
                                "properties": {
                                  "attribute": "idocs:juridicalAddress"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = !isIndividual;",
                                "type": "textfield",
                                "input": true
                              },
                              {
                                "label": "idocs:registrationAddress",
                                "defaultValue": "",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_registrationAddress",
                                "properties": {
                                  "attribute": "idocs:registrationAddress"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column5",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [
                              {
                                "label": "idocs:postAddress",
                                "defaultValue": "",
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_postAddress",
                                "properties": {
                                  "attribute": "idocs:postAddress"
                                },
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column6",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column7",
                            "components": [],
                            "index": 2,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "key": "columns12",
                        "type": "columns",
                        "input": false
                      }
                    ],
                    "tab": 0
                  },
                  {
                    "title": "Реквизиты",
                    "key": "panel10",
                    "type": "panel",
                    "input": false,
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "Автозаполнение",
                                "action": "custom",
                                "state": "",
                                "showValidations": false,
                                "custom": "const { idocs_inn: inn } = data || {};\n\nif (!inn) {\n\tCiteck.Dialogs.showInfoDialog({\n\t\ttitle: instance.t('Error'), \n\t\ttext: instance.t('Inn field is requered')\n\t});\n\treturn;\n}\n\nconst setAddress = result => {\n\tconst { legalAddress } = result || {};\n\tif (!legalAddress) {\n\t\treturn result;\n\t}\n\n\tlet address = [];\n\n\tconst topos = ['regionName', 'district', 'city', 'settlement', 'street', 'house', 'bulk', 'flat']\n\tgetTopoStr = (topo) => {\n\t\tconst { topoValue, topoFullName, topoShortName } = topo || {};\n\t\tif (!topoValue) {\n\t\t\treturn topoValue;\n\t\t}\n\n\t\tlet short = '';\n\t\tif (!!topoShortName) {\n\t\t\tshort = topoShortName + '. ';\n\t\t} else if (!!topoFullName) {\n\t\t\tshort = topoFullName + ' ';\n\t\t}\n\n\t\treturn !!topoValue ? (short + topoValue) : null;\n\t}\n\n\tfor (let topoName of topos) {\n\t\tlet topoStr = getTopoStr(legalAddress[topoName]);\n\t\tif (!!topoStr && !address.includes(topoStr)) {\n\t\t\taddress.push(topoStr);\n\t\t}\n\t}\n\n\tresult['idocs_juridicalAddress'] = address.join(\", \");\n\n\treturn result;\n}\n\nconst isNeedAsk = (attributes, result) => {\n\tfor (let att of attributes) {\n\t\tconst {[att]: prevVal} = data || {};\n\t\tconst {[att]: curVal} = result || {};\n\n\t\tif (prevVal !== undefined && !!prevVal && curVal != prevVal) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nCiteck.Records.query({\n\tsourceId: 'integrations/rs_findContractorByInn',\n\tquery: {\n\t\tinn: inn\n\t}\n}, '.json')\n.then(result => {\n\tconst {errors} = result || {};\n\tif (_.isArray(errors) && errors.length > 0) {\n\t\tthrow({\n\t\t\t'msgForUser': instance.t('Error while requesting data'),\n\t\t\terrors\n\t\t});\n\t}\n\treturn result;\n})\n.then(result => {\n\tconst { records } = result || {};\n\tconst { '.json': queryData } = (records || {})[0] || {};\n\tif (!queryData) {\n\t\tthrow({\n\t\t\t'msgForUser': instance.t('Data is empty'),\n\t\t\trecords\n\t\t});\n\t}\n\treturn queryData;\n})\n.then(setAddress)\n.then(result => {\n\tconst attributes = [\n\t\t'idocs_fullOrganizationName', 'idocs_shortOrganizationName',\n\t\t'idocs_juridicalAddress', 'idocs_postAddress', \n\t\t'idocs_okpo', 'idocs_CEOname', 'idocs_kpp', 'idocs_ogrn'\n\t];\n\n\tvar needAsk = isNeedAsk(attributes, result);\n\n\tconst rewrite = () => {\n\t\tutils.eachComponent(form.components, component => {\n\t\t\tvar newValue = result[component.key];\n\t\t\tif (newValue !== undefined) {\n\t\t\t\tcomponent.setValue(newValue);\n\t\t\t}\n\t\t});\n\t};\n\n\tif (needAsk) {\n\t\tCiteck.Dialogs.confirmDialog({\n\t\t\ttitle: instance.t('Перезаписать заполненные поля формы?'),\n\t\t\tonYes: rewrite\n\t\t})\n\t} else {\n\t\trewrite()\n\t}\n}).catch(error => {\n\tconst { msgForUser } = error || {};\n\tCiteck.Dialogs.showInfoDialog({\n\t\ttitle: instance.t('Error'), \n\t\ttext: msgForUser || instance.t('Undefined error')\n\t});\n});",
                                "theme": "primary",
                                "tooltip": "Нажмите, чтобы автоматически заполнить поля реквизитов",
                                "key": "dadata_loader",
                                "customConditional": "var isEntInstalled = data.isEntInstalled === 'true';\n\nshow = isEntInstalled;",
                                "logic": [
                                  {
                                    "name": "Label",
                                    "trigger": {
                                      "type": "javascript",
                                      "javascript": "const { options } = instance || {};\r\nconst { formMode } = options || {};\r\nconst { caseStatus } = data || {};\r\nconst { 'status': statusStr } = data || {};\r\n\r\nconst isDraftStatus = statusStr === \"draft\";\r\nconst isCreateMode = formMode === 'CREATE';\r\n \r\nresult = !isDraftStatus && !isCreateMode;"
                                    },
                                    "actions": [
                                      {
                                        "name": "Set label",
                                        "type": "property",
                                        "property": {
                                          "label": "Label",
                                          "value": "label",
                                          "type": "string"
                                        },
                                        "text": "Update"
                                      }
                                    ]
                                  }
                                ],
                                "type": "button",
                                "input": true,
                                "defaultValue": false
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column5",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column6",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column7",
                            "components": [
                              {
                                "label": "idocs:inn",
                                "clearOnHide": false,
                                "disabled": true,
                                "defaultValue": "",
                                "validate": {
                                  "required": true,
                                  "pattern": "^\\d{8}$|^\\d{10}$|^\\d{12}$",
                                  "customMessage": "Некорректный ИНН/ЕГРПОУ"
                                },
                                "key": "idocs_inn",
                                "properties": {
                                  "attribute": "idocs:inn"
                                },
                                "logic": [
                                  {
                                    "name": "Disable ",
                                    "trigger": {
                                      "type": "javascript",
                                      "javascript": "const { options } = instance || {};\r\nconst { formMode } = options || {};\r\nconst { caseStatus } = data || {};\r\nconst { 'status': statusStr } = data || {};\r\n\r\nconst isDraftStatus = statusStr === \"draft\";\r\nconst isCreateMode = formMode === 'CREATE';\r\n \r\nresult = isDraftStatus || isCreateMode;"
                                    },
                                    "actions": [
                                      {
                                        "name": "Disable OFF",
                                        "type": "property",
                                        "property": {
                                          "label": "Disabled",
                                          "value": "disabled",
                                          "type": "boolean"
                                        },
                                        "state": "false"
                                      }
                                    ]
                                  }
                                ],
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "index": 2,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 3,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "components": [
                              {
                                "label": "idocs:kpp",
                                "defaultValue": "",
                                "key": "idocs_kpp",
                                "properties": {
                                  "attribute": "idocs:kpp"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = !isIndividual;",
                                "type": "textfield",
                                "input": true
                              },
                              {
                                "label": "idocs:inila",
                                "defaultValue": "",
                                "key": "idocs_inila",
                                "properties": {
                                  "attribute": "idocs:inila"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 4,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "components": [
                              {
                                "label": "idocs:okpo",
                                "defaultValue": "",
                                "key": "idocs_okpo",
                                "properties": {
                                  "attribute": "idocs:okpo"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = !isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 5,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "components": [
                              {
                                "label": "idocs:ogrn",
                                "defaultValue": "",
                                "key": "idocs_ogrn",
                                "properties": {
                                  "attribute": "idocs:ogrn"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual' || kind === 'individual-entrepreneur';\n\nshow = !isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column888",
                            "components": [
                              {
                                "label": "idocs:gln",
                                "clearOnHide": false,
                                "defaultValue": "",
                                "validate": {
                                  "pattern": "^\\d{13}$|^$",
                                  "customMessage": "Некорректный GLN"
                                },
                                "key": "idocs_gln",
                                "properties": {
                                  "attribute": "idocs:gln"
                                },
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "index": 6,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "key": "columns13",
                        "type": "columns",
                        "input": false
                      },
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:psrnsp",
                                "defaultValue": "",
                                "key": "idocs_psrnsp",
                                "properties": {
                                  "attribute": "idocs:psrnsp"
                                },
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 1,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "components": [
                              {
                                "label": "idocs:series",
                                "defaultValue": "",
                                "key": "idocs_series",
                                "properties": {
                                  "attribute": "idocs:series"
                                },
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 2,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "components": [
                              {
                                "label": "idocs:number",
                                "defaultValue": "",
                                "key": "idocs_number",
                                "properties": {
                                  "attribute": "idocs:number"
                                },
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 3,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "components": []
                          }
                        ],
                        "key": "columns15",
                        "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividualEnt = kind === 'individual-entrepreneur';\n\nshow = isIndividualEnt;",
                        "type": "columns",
                        "input": false
                      }
                    ],
                    "tab": 0
                  },
                  {
                    "title": "Контактные данные",
                    "key": "panel11",
                    "type": "panel",
                    "input": false,
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:phone",
                                "defaultValue": "",
                                "key": "idocs_phone",
                                "properties": {
                                  "attribute": "idocs:phone"
                                },
                                "type": "textfield",
                                "input": true
                              },
                              {
                                "label": "idocs:CEOname",
                                "defaultValue": "",
                                "key": "idocs_CEOname",
                                "properties": {
                                  "attribute": "idocs:CEOname"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = !isIndividual;",
                                "logic": [
                                  {
                                    "name": "Contractor kind not individual-entrepreneur",
                                    "trigger": {
                                      "type": "javascript",
                                      "javascript": "var kind = data['idocs_contractorKind'];\n\nresult = (!!kind && kind !== 'individual-entrepreneur');"
                                    },
                                    "actions": [
                                      {
                                        "name": "Required",
                                        "type": "property",
                                        "property": {
                                          "label": "Required",
                                          "value": "validate.required",
                                          "type": "boolean"
                                        },
                                        "state": "true"
                                      }
                                    ]
                                  }
                                ],
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column5",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [
                              {
                                "label": "idocs:fax",
                                "defaultValue": "",
                                "key": "idocs_fax",
                                "properties": {
                                  "attribute": "idocs:fax"
                                },
                                "type": "textfield",
                                "input": true
                              },
                              {
                                "label": "idocs:nameInGenitiveCase",
                                "defaultValue": "",
                                "key": "idocs_nameInGenitiveCase",
                                "properties": {
                                  "attribute": "idocs:nameInGenitiveCase"
                                },
                                "customConditional": "var kind = data ? data['idocs_contractorKind'] : null;\n\nvar isIndividual = kind === 'individual';\n\nshow = !isIndividual;",
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column6",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "width": 4,
                            "type": "column",
                            "input": false,
                            "key": "column7",
                            "components": [
                              {
                                "label": "idocs:email",
                                "defaultValue": "",
                                "validate": {
                                  "pattern": "^(|[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]+)$",
                                  "customMessage": "Некорректный формат"
                                },
                                "key": "idocs_email",
                                "properties": {
                                  "attribute": "idocs:email"
                                },
                                "type": "textfield",
                                "input": true
                              }
                            ],
                            "index": 2,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "key": "columns14",
                        "type": "columns",
                        "input": false
                      }
                    ],
                    "tab": 0
                  },
                  {
                    "title": "Ответственные со стороны компании",
                    "type": "panel",
                    "input": false,
                    "key": "panel2",
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:initiator",
                                "currentUserByDefault": true,
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_initiator",
                                "properties": {
                                  "attribute": "idocs:initiator",
                                  "dummy": "dummy"
                                },
                                "type": "selectOrgstruct",
                                "input": true,
                                "allUsersGroup": "all"
                              }
                            ],
                            "type": "column",
                            "input": false,
                            "key": "column22",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "components": [
                              {
                                "label": "ecos:responsible",
                                "currentUserByDefault": true,
                                "validate": {
                                  "required": true
                                },
                                "key": "ecos_responsible",
                                "properties": {
                                  "attribute": "ecos:responsible",
                                  "dummy": "dummy"
                                },
                                "type": "selectOrgstruct",
                                "input": true,
                                "allUsersGroup": "all"
                              }
                            ],
                            "type": "column",
                            "input": false,
                            "key": "column23",
                            "index": 1,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "key": "columns4",
                        "type": "columns",
                        "input": false
                      }
                    ],
                    "tab": 0,
                    "collapsed": false,
                    "reorder": false
                  },
                  {
                    "title": "Конфигурация",
                    "refreshOn": "isEdiEnabled",
                    "key": "panel8",
                    "conditional": {
                      "show": "true",
                      "when": "isEdiEnabled",
                      "eq": "true"
                    },
                    "type": "panel",
                    "input": false,
                    "components": [
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "idocs:doNotSendContractToEdiFlag",
                                "key": "idocs_doNotSendContractToEdiFlag",
                                "properties": {
                                  "attribute": "idocs:doNotSendContractToEdiFlag"
                                },
                                "type": "checkbox",
                                "input": true
                              }
                            ],
                            "classes": "d-flex justify-content-start align-items-center",
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "index": 0,
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          },
                          {
                            "index": 1,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "label": "Column",
                            "components": [
                              {
                                "label": "idocs:responsibilities",
                                "multiple": true,
                                "clearOnHide": false,
                                "currentUserByDefault": true,
                                "validate": {
                                  "required": true
                                },
                                "key": "idocs_responsibilities",
                                "properties": {
                                  "attribute": "idocs:responsibilities",
                                  "dummy": "dummy"
                                },
                                "type": "selectOrgstruct",
                                "input": true,
                                "allUsersGroup": "all",
                                "defaultValue": "",
                                "reorder": false
                              }
                            ],
                            "clearOnHide": true,
                            "conditional": {
                              "show": null,
                              "when": null
                            }
                          }
                        ],
                        "key": "columns11",
                        "type": "columns",
                        "input": false
                      },
                      {
                        "columns": [
                          {
                            "components": [
                              {
                                "label": "eint:ediProviderInfoAssoc",
                                "multiple": true,
                                "clearOnHide": false,
                                "source": {
                                  "type": "custom",
                                  "custom": {
                                    "columns": [
                                      {
                                        "name": "eint:ediProviderBoxId",
                                        "formatter": "",
                                        "setAttributesManually": false
                                      },
                                      {
                                        "name": "eint:ediProviderType",
                                        "formatter": "",
                                        "setAttributesManually": false
                                      },
                                      {
                                        "name": "eint:ediProviderInfoIsActive",
                                        "formatter": "",
                                        "setAttributesManually": false
                                      }
                                    ],
                                    "record": null,
                                    "attribute": null
                                  }
                                },
                                "key": "eint_ediProviderInfoAssoc",
                                "properties": {
                                  "attribute": "eint:ediProviderInfoAssoc"
                                },
                                "type": "tableForm",
                                "input": true,
                                "reorder": false
                              }
                            ],
                            "md": 12,
                            "type": "column",
                            "input": false,
                            "key": "column",
                            "index": 0
                          }
                        ],
                        "key": "columns8",
                        "type": "columns",
                        "input": false
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "label": "Банковские реквизиты",
            "key": "bank-data",
            "components": [
              {
                "scrollableContent": true,
                "key": "panel6",
                "type": "panel",
                "input": false,
                "components": [
                  {
                    "columns": [
                      {
                        "components": [
                          {
                            "label": "idocs:bankTitle",
                            "defaultValue": "",
                            "key": "idocs_bankTitle",
                            "properties": {
                              "attribute": "idocs:bankTitle",
                              "dummy": "dummy"
                            },
                            "logic": [
                              {
                                "name": "Contractor kind is legal-entity",
                                "trigger": {
                                  "type": "simple",
                                  "simple": {
                                    "show": true,
                                    "when": "idocs_contractorKind",
                                    "eq": "legal-entity"
                                  }
                                },
                                "actions": [
                                  {
                                    "name": "Required",
                                    "type": "property",
                                    "property": {
                                      "label": "Required",
                                      "value": "validate.required",
                                      "type": "boolean"
                                    },
                                    "state": "true"
                                  }
                                ]
                              }
                            ],
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column27",
                        "index": 0,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      },
                      {
                        "components": [
                          {
                            "label": "idocs:bankTitleEng",
                            "defaultValue": "",
                            "key": "idocs_bankTitleEng",
                            "properties": {
                              "attribute": "idocs:bankTitleEng",
                              "dummy": "dummy"
                            },
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column28",
                        "index": 1,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      },
                      {
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column29",
                        "components": [
                          {
                            "label": "idocs:bankId",
                            "defaultValue": "",
                            "key": "idocs_bankId",
                            "properties": {
                              "attribute": "idocs:bankId",
                              "dummy": "dummy"
                            },
                            "logic": [
                              {
                                "name": "Contractor kind is legal-entity",
                                "trigger": {
                                  "type": "simple",
                                  "simple": {
                                    "show": true,
                                    "when": "idocs_contractorKind",
                                    "eq": "legal-entity"
                                  }
                                },
                                "actions": [
                                  {
                                    "name": "Required",
                                    "type": "property",
                                    "property": {
                                      "label": "Required",
                                      "value": "validate.required",
                                      "type": "boolean"
                                    },
                                    "state": "true"
                                  }
                                ]
                              }
                            ],
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "index": 2,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      }
                    ],
                    "key": "columns",
                    "type": "columns",
                    "input": false,
                    "tab": 1
                  },
                  {
                    "label": "Columns2",
                    "columns": [
                      {
                        "components": [
                          {
                            "label": "idocs:accountNumber",
                            "defaultValue": "",
                            "key": "idocs_accountNumber",
                            "properties": {
                              "attribute": "idocs:accountNumber",
                              "dummy": "dummy"
                            },
                            "logic": [
                              {
                                "name": "Contractor kind is legal-entity",
                                "trigger": {
                                  "type": "simple",
                                  "simple": {
                                    "show": true,
                                    "when": "idocs_contractorKind",
                                    "eq": "legal-entity"
                                  }
                                },
                                "actions": [
                                  {
                                    "name": "Required",
                                    "type": "property",
                                    "property": {
                                      "label": "Required",
                                      "value": "validate.required",
                                      "type": "boolean"
                                    },
                                    "state": "true"
                                  }
                                ]
                              }
                            ],
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column30",
                        "index": 0,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      },
                      {
                        "components": [
                          {
                            "label": "idocs:swift",
                            "defaultValue": "",
                            "key": "idocs_swift",
                            "properties": {
                              "attribute": "idocs:swift",
                              "dummy": "dummy"
                            },
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column31",
                        "index": 1,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      },
                      {
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column32",
                        "components": [
                          {
                            "label": "idocs:currencyEnabled",
                            "labelPosition": "left-left",
                            "key": "idocs_currencyEnabled",
                            "properties": {
                              "attribute": "idocs:currencyEnabled",
                              "dummy": "dummy"
                            },
                            "labelMargin": 15,
                            "type": "checkbox",
                            "input": true
                          }
                        ],
                        "index": 2,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      }
                    ],
                    "key": "columns2",
                    "type": "columns",
                    "input": false,
                    "tab": 1
                  },
                  {
                    "label": "Columns3",
                    "columns": [
                      {
                        "components": [
                          {
                            "label": "idocs:corresponentBankTitle",
                            "defaultValue": "",
                            "key": "idocs_corresponentBankTitle",
                            "properties": {
                              "attribute": "idocs:corresponentBankTitle",
                              "dummy": "dummy"
                            },
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column33",
                        "index": 0,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      },
                      {
                        "components": [
                          {
                            "label": "idocs:correspondentBankId",
                            "defaultValue": "",
                            "key": "idocs_correspondentBankId",
                            "properties": {
                              "attribute": "idocs:correspondentBankId",
                              "dummy": "dummy"
                            },
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column34",
                        "index": 1,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      },
                      {
                        "width": 4,
                        "type": "column",
                        "input": false,
                        "key": "column35",
                        "components": [
                          {
                            "label": "idocs:corresponentAccountNumber",
                            "defaultValue": "",
                            "key": "idocs_corresponentAccountNumber",
                            "properties": {
                              "attribute": "idocs:corresponentAccountNumber",
                              "dummy": "dummy"
                            },
                            "type": "textfield",
                            "input": true
                          }
                        ],
                        "index": 2,
                        "clearOnHide": true,
                        "conditional": {
                          "show": null,
                          "when": null
                        }
                      }
                    ],
                    "key": "columns3",
                    "type": "columns",
                    "input": false,
                    "tab": 1
                  }
                ]
              }
            ]
          }
        ],
        "tabindex": "1",
        "key": "tabs",
        "type": "tabs",
        "input": false
      },
      {
        "columns": [
          {
            "components": [
              {
                "label": "Cancel",
                "removeIndents": true,
                "action": "event",
                "state": "",
                "showValidations": false,
                "event": "cancel",
                "block": true,
                "clearOnHide": false,
                "key": "Cancel2",
                "type": "button",
                "input": true
              }
            ],
            "md": 3,
            "type": "column",
            "input": false,
            "key": "column",
            "label": "Column",
            "index": 0,
            "clearOnHide": true,
            "conditional": {
              "show": null,
              "when": null
            }
          },
          {
            "md": 3,
            "type": "column",
            "input": false,
            "key": "column",
            "label": "Column",
            "index": 1,
            "components": [
              {
                "source": {
                  "type": "ajax",
                  "ajax": {
                    "url": "/citeck/info/is-ent-installed",
                    "data": "value = {}",
                    "mapping": "value = data.isEntInstalled;",
                    "method": "GET"
                  },
                  "forceLoad": false
                },
                "type": "asyncData",
                "input": true,
                "key": "isEntInstalled",
                "update": {
                  "type": "any-change"
                },
                "refreshOn": "",
                "conditional": {
                  "show": null,
                  "when": null
                }
              }
            ],
            "clearOnHide": true,
            "conditional": {
              "show": null,
              "when": null
            }
          },
          {
            "md": 3,
            "type": "column",
            "input": false,
            "key": "column",
            "label": "Column",
            "index": 2,
            "components": [
              {
                "label": "isEdiEnabled",
                "source": {
                  "type": "ajax",
                  "ajax": {
                    "url": "/citeck/ecosConfig/ecos-config-value",
                    "data": "value = {'configName': 'electronic-document-management'};",
                    "mapping": "const { value: val } = data || {};\nvalue = val;",
                    "method": "GET"
                  },
                  "forceLoad": false
                },
                "update": {
                  "type": "once",
                  "rate": 200
                },
                "key": "isEdiEnabled",
                "type": "asyncData",
                "input": true
              }
            ],
            "clearOnHide": true,
            "conditional": {
              "show": null,
              "when": null
            }
          },
          {
            "md": 3,
            "type": "column",
            "input": false,
            "key": "column",
            "label": "Column",
            "index": 3,
            "components": [
              {
                "label": "Save",
                "removeIndents": true,
                "state": "",
                "theme": "primary",
                "block": true,
                "disableOnInvalid": true,
                "clearOnHide": false,
                "key": "Create2",
                "logic": [
                  {
                    "name": "Label Create",
                    "trigger": {
                      "type": "javascript",
                      "javascript": "const { options } = instance || {};\r\nconst { formMode } = options || {};\r\nconst { caseStatus } = data || {};\r\nconst { 'status': statusStr } = data || {};\r\n\r\nconst isDraftStatus = statusStr === \"draft\";\r\nconst isCreateMode = formMode === 'CREATE';\r\n \r\nresult = isDraftStatus || isCreateMode;"
                    },
                    "actions": [
                      {
                        "name": "Label Create",
                        "type": "property",
                        "property": {
                          "label": "Label",
                          "value": "label",
                          "type": "string"
                        },
                        "text": "Create"
                      }
                    ]
                  }
                ],
                "type": "button",
                "input": true
              }
            ],
            "clearOnHide": true,
            "conditional": {
              "show": null,
              "when": null
            }
          }
        ],
        "key": "columns10",
        "type": "columns",
        "input": false
      }
    ],
    "display": "form"
  },
  "attributes": {}
}
